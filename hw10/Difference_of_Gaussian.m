clear all;
clc;
addpath('C:\Users\jennifer\Desktop');
img = imread('lena.bmp');
input=double(img);
blur1=zeros(512);
blur2=zeros(512);

sigma1 = 1;
gauss1 = fspecial('gaussian',[11 11], sigma1);
sigma2 = 3;
gauss2 = fspecial('gaussian',[11 11], sigma2);

gauss=gauss1-gauss2;

for a=6:507
    for b=6:507
        blur1(a,b)=img(a-5,b-5)*gauss1(1,1)+img(a-5,b-4)*gauss1(1,2)+img(a-5,b-3)*gauss1(1,3)+img(a-5,b-2)*gauss1(1,4)+img(a-5,b-1)*gauss1(1,5)+img(a-5,b)*gauss1(1,6)+img(a-5,b+1)*gauss1(1,7)+img(a-5,b+2)*gauss1(1,8)+img(a-5,b+3)*gauss1(1,9)+img(a-5,b+4)*gauss1(1,10)+img(a-5,b+5)*gauss1(1,11)...
                  +img(a-4,b-5)*gauss1(2,1)+img(a-4,b-4)*gauss1(2,2)+img(a-4,b-3)*gauss1(2,3)+img(a-4,b-2)*gauss1(2,4)+img(a-4,b-1)*gauss1(2,5)+img(a-4,b)*gauss1(2,6)+img(a-4,b+1)*gauss1(2,7)+img(a-4,b+2)*gauss1(2,8)+img(a-4,b+3)*gauss1(2,9)+img(a-4,b+4)*gauss1(2,10)+img(a-4,b+5)*gauss1(2,11)...
                  +img(a-3,b-5)*gauss1(3,1)+img(a-3,b-4)*gauss1(3,2)+img(a-3,b-3)*gauss1(3,3)+img(a-3,b-2)*gauss1(3,4)+img(a-3,b-1)*gauss1(3,5)+img(a-3,b)*gauss1(3,6)+img(a-3,b+1)*gauss1(3,7)+img(a-3,b+2)*gauss1(3,8)+img(a-3,b+3)*gauss1(3,9)+img(a-3,b+4)*gauss1(3,10)+img(a-3,b+5)*gauss1(3,11)...
                  +img(a-2,b-5)*gauss1(4,1)+img(a-2,b-4)*gauss1(4,2)+img(a-2,b-3)*gauss1(4,3)+img(a-2,b-2)*gauss1(4,4)+img(a-2,b-1)*gauss1(4,5)+img(a-2,b)*gauss1(4,6)+img(a-2,b+1)*gauss1(4,7)+img(a-2,b+2)*gauss1(4,8)+img(a-2,b+3)*gauss1(4,9)+img(a-2,b+4)*gauss1(4,10)+img(a-2,b+5)*gauss1(4,11)...
                  +img(a-1,b-5)*gauss1(5,1)+img(a-1,b-4)*gauss1(5,2)+img(a-1,b-3)*gauss1(5,3)+img(a-1,b-2)*gauss1(5,4)+img(a-1,b-1)*gauss1(5,5)+img(a-1,b)*gauss1(5,6)+img(a-1,b+1)*gauss1(5,7)+img(a-1,b+2)*gauss1(5,8)+img(a-1,b+3)*gauss1(5,9)+img(a-1,b+4)*gauss1(5,10)+img(a-1,b+5)*gauss1(5,11)...
                  +img(a,b-5)*gauss1(6,1)+img(a,b-4)*gauss1(6,2)+img(a,b-3)*gauss1(6,3)+img(a,b-2)*gauss1(6,4)+img(a,b-1)*gauss1(6,5)+img(a,b)*gauss1(6,6)+img(a,b+1)*gauss1(6,7)+img(a,b+2)*gauss1(6,8)+img(a,b+3)*gauss1(6,9)+img(a,b+4)*gauss1(6,10)+img(a,b+5)*gauss1(6,11)... 
                  +img(a+1,b-5)*gauss1(7,1)+img(a+1,b-4)*gauss1(7,2)+img(a+1,b-3)*gauss1(7,3)+img(a+1,b-2)*gauss1(7,4)+img(a+1,b-1)*gauss1(7,5)+img(a+1,b)*gauss1(7,6)+img(a+1,b+1)*gauss1(7,7)+img(a+1,b+2)*gauss1(7,8)+img(a+1,b+3)*gauss1(7,9)+img(a+1,b+4)*gauss1(7,10)+img(a+1,b+5)*gauss1(7,11)...
                  +img(a+2,b-5)*gauss1(8,1)+img(a+2,b-4)*gauss1(8,2)+img(a+2,b-3)*gauss1(8,3)+img(a+2,b-2)*gauss1(8,4)+img(a+2,b-1)*gauss1(8,5)+img(a+2,b)*gauss1(8,6)+img(a+2,b+1)*gauss1(8,7)+img(a+2,b+2)*gauss1(8,8)+img(a+2,b+3)*gauss1(8,9)+img(a+2,b+4)*gauss1(8,10)+img(a+2,b+5)*gauss1(8,11)...
                  +img(a+3,b-5)*gauss1(9,1)+img(a+3,b-4)*gauss1(9,2)+img(a+3,b-3)*gauss1(9,3)+img(a+3,b-2)*gauss1(9,4)+img(a+3,b-1)*gauss1(9,5)+img(a+3,b)*gauss1(9,6)+img(a+3,b+1)*gauss1(9,7)+img(a+3,b+2)*gauss1(9,8)+img(a+3,b+3)*gauss1(9,9)+img(a+3,b+4)*gauss1(9,10)+img(a+3,b+5)*gauss1(9,11)...
                  +img(a+4,b-5)*gauss1(10,1)+img(a+4,b-4)*gauss1(10,2)+img(a+4,b-3)*gauss1(10,3)+img(a+4,b-2)*gauss1(10,4)+img(a+4,b-1)*gauss1(10,5)+img(a+4,b)*gauss1(10,6)+img(a+4,b+1)*gauss1(10,7)+img(a+4,b+2)*gauss1(10,8)+img(a+4,b+3)*gauss1(10,9)+img(a+4,b+4)*gauss1(10,10)+img(a+4,b+5)*gauss1(10,11)...
                  +img(a+5,b-5)*gauss1(11,1)+img(a+5,b-4)*gauss1(11,2)+img(a+5,b-3)*gauss1(11,3)+img(a+5,b-2)*gauss1(11,4)+img(a+5,b-1)*gauss1(11,5)+img(a+5,b)*gauss1(11,6)+img(a+5,b+1)*gauss1(11,7)+img(a+5,b+2)*gauss1(11,8)+img(a+5,b+3)*gauss1(11,9)+img(a+5,b+4)*gauss1(11,10)+img(a+5,b+5)*gauss1(11,11);
        blur2(a,b)=img(a-5,b-5)*gauss2(1,1)+img(a-5,b-4)*gauss2(1,2)+img(a-5,b-3)*gauss2(1,3)+img(a-5,b-2)*gauss2(1,4)+img(a-5,b-1)*gauss2(1,5)+img(a-5,b)*gauss2(1,6)+img(a-5,b+1)*gauss2(1,7)+img(a-5,b+2)*gauss2(1,8)+img(a-5,b+3)*gauss2(1,9)+img(a-5,b+4)*gauss2(1,10)+img(a-5,b+5)*gauss2(1,11)...
                  +img(a-4,b-5)*gauss2(2,1)+img(a-4,b-4)*gauss2(2,2)+img(a-4,b-3)*gauss2(2,3)+img(a-4,b-2)*gauss2(2,4)+img(a-4,b-1)*gauss2(2,5)+img(a-4,b)*gauss2(2,6)+img(a-4,b+1)*gauss2(2,7)+img(a-4,b+2)*gauss2(2,8)+img(a-4,b+3)*gauss2(2,9)+img(a-4,b+4)*gauss2(2,10)+img(a-4,b+5)*gauss2(2,11)...
                  +img(a-3,b-5)*gauss2(3,1)+img(a-3,b-4)*gauss2(3,2)+img(a-3,b-3)*gauss2(3,3)+img(a-3,b-2)*gauss2(3,4)+img(a-3,b-1)*gauss2(3,5)+img(a-3,b)*gauss2(3,6)+img(a-3,b+1)*gauss2(3,7)+img(a-3,b+2)*gauss2(3,8)+img(a-3,b+3)*gauss2(3,9)+img(a-3,b+4)*gauss2(3,10)+img(a-3,b+5)*gauss2(3,11)...
                  +img(a-2,b-5)*gauss2(4,1)+img(a-2,b-4)*gauss2(4,2)+img(a-2,b-3)*gauss2(4,3)+img(a-2,b-2)*gauss2(4,4)+img(a-2,b-1)*gauss2(4,5)+img(a-2,b)*gauss2(4,6)+img(a-2,b+1)*gauss2(4,7)+img(a-2,b+2)*gauss2(4,8)+img(a-2,b+3)*gauss2(4,9)+img(a-2,b+4)*gauss2(4,10)+img(a-2,b+5)*gauss2(4,11)...
                  +img(a-1,b-5)*gauss2(5,1)+img(a-1,b-4)*gauss2(5,2)+img(a-1,b-3)*gauss2(5,3)+img(a-1,b-2)*gauss2(5,4)+img(a-1,b-1)*gauss2(5,5)+img(a-1,b)*gauss2(5,6)+img(a-1,b+1)*gauss2(5,7)+img(a-1,b+2)*gauss2(5,8)+img(a-1,b+3)*gauss2(5,9)+img(a-1,b+4)*gauss2(5,10)+img(a-1,b+5)*gauss2(5,11)...
                  +img(a,b-5)*gauss2(6,1)+img(a,b-4)*gauss2(6,2)+img(a,b-3)*gauss2(6,3)+img(a,b-2)*gauss2(6,4)+img(a,b-1)*gauss2(6,5)+img(a,b)*gauss2(6,6)+img(a,b+1)*gauss2(6,7)+img(a,b+2)*gauss2(6,8)+img(a,b+3)*gauss2(6,9)+img(a,b+4)*gauss2(6,10)+img(a,b+5)*gauss2(6,11)... 
                  +img(a+1,b-5)*gauss2(7,1)+img(a+1,b-4)*gauss2(7,2)+img(a+1,b-3)*gauss2(7,3)+img(a+1,b-2)*gauss2(7,4)+img(a+1,b-1)*gauss2(7,5)+img(a+1,b)*gauss2(7,6)+img(a+1,b+1)*gauss2(7,7)+img(a+1,b+2)*gauss2(7,8)+img(a+1,b+3)*gauss2(7,9)+img(a+1,b+4)*gauss2(7,10)+img(a+1,b+5)*gauss2(7,11)...
                  +img(a+2,b-5)*gauss2(8,1)+img(a+2,b-4)*gauss2(8,2)+img(a+2,b-3)*gauss2(8,3)+img(a+2,b-2)*gauss2(8,4)+img(a+2,b-1)*gauss2(8,5)+img(a+2,b)*gauss2(8,6)+img(a+2,b+1)*gauss2(8,7)+img(a+2,b+2)*gauss2(8,8)+img(a+2,b+3)*gauss2(8,9)+img(a+2,b+4)*gauss2(8,10)+img(a+2,b+5)*gauss2(8,11)...
                  +img(a+3,b-5)*gauss2(9,1)+img(a+3,b-4)*gauss2(9,2)+img(a+3,b-3)*gauss2(9,3)+img(a+3,b-2)*gauss2(9,4)+img(a+3,b-1)*gauss2(9,5)+img(a+3,b)*gauss2(9,6)+img(a+3,b+1)*gauss2(9,7)+img(a+3,b+2)*gauss2(9,8)+img(a+3,b+3)*gauss2(9,9)+img(a+3,b+4)*gauss2(9,10)+img(a+3,b+5)*gauss2(9,11)...
                  +img(a+4,b-5)*gauss2(10,1)+img(a+4,b-4)*gauss2(10,2)+img(a+4,b-3)*gauss2(10,3)+img(a+4,b-2)*gauss2(10,4)+img(a+4,b-1)*gauss2(10,5)+img(a+4,b)*gauss2(10,6)+img(a+4,b+1)*gauss2(10,7)+img(a+4,b+2)*gauss2(10,8)+img(a+4,b+3)*gauss2(10,9)+img(a+4,b+4)*gauss2(10,10)+img(a+4,b+5)*gauss2(10,11)...
                  +img(a+5,b-5)*gauss2(11,1)+img(a+5,b-4)*gauss2(11,2)+img(a+5,b-3)*gauss2(11,3)+img(a+5,b-2)*gauss2(11,4)+img(a+5,b-1)*gauss2(11,5)+img(a+5,b)*gauss2(11,6)+img(a+5,b+1)*gauss2(11,7)+img(a+5,b+2)*gauss2(11,8)+img(a+5,b+3)*gauss2(11,9)+img(a+5,b+4)*gauss2(11,10)+img(a+5,b+5)*gauss2(11,11);
    end
end    

output = blur1 - blur2;
for i=1:512
    for j=1:512
        if output(i,j)>=13
            output(i,j)=0;
        else
            output(i,j)=255;
        end
    end
end    

output=uint8(output);
imwrite(output,'DifferenceofGaussian.bmp');